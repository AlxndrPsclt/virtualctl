var e={};async function t(e,t){try{let o=document.getElementById("hostaddr").value,n=await fetch(`http://${o}:8080/osc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,value:t})});n.ok||console.error("Failed to send OSC:",await n.text())}catch(e){console.error("HTTP request failed:",e)}}const o=document.querySelector(".knobs");o&&o.remove();const n=document.createElement("div");n.className="knobs";for(let e=1;e<=128;e++){let t=document.createElement("webaudio-knob");t.id=`knob${e}`,t.setAttribute("min","0"),t.setAttribute("max","1"),t.setAttribute("step","0.001"),t.setAttribute("colors","#81a1c1;#4c566a;#444"),t.setAttribute("width","46"),t.setAttribute("height","46"),n.appendChild(t)}const r=document.querySelector(".app");r?r.appendChild(n):console.error('No element with class "app" found.');for(let e=1;e<=128;e++){let o=document.getElementById(`knob${e}`);o&&o.addEventListener("input",o=>{let n=parseFloat(o.target.value),r=`/virtualctl/K${String(e.toString(16)).padStart(2,"0")}`;console.log(`Sending OSC: ${r} ${n}`),t(r,n)})}var a={};async function l(){if(console.log("Registering"),console.log(navigator),"serviceWorker"in navigator)try{await navigator.serviceWorker.register(a)}catch(e){console.log("Service Worker registration failed:",e)}}function i(t){e=new OSC.WebsocketClientPlugin({host:t,port:8080}),new OSC({plugin:e}).open()}a=import.meta.resolve("7yeQP"),window.addEventListener("load",()=>{let e=document.getElementById("hostaddr").value;console.log("C'est parti!!"),console.log(e),i(e),l()}),document.getElementById("hostaddr").addEventListener("change",e=>{console.log("Changed IP, reconnecting"),console.log(e.target.value),i(e.target.value)}),window.onbeforeunload=function(){console.log("Your work will be lost.")},window.addEventListener("popstate",()=>{console.log("User clicked back button")});
//# sourceMappingURL=virtualctl.github.067a21c0.js.map
